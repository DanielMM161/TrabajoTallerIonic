<ion-header>
  <ion-toolbar>
    <ion-title>formulario</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <!-- Por cada vuelta dada en el ngFor me genera un input y una serie de divs dependiendo del input
   que sea, estos divs generados son los encargados de mostrar los mensajes de error cuando un dato este mal
  introducido-->
  <form [formGroup]="formGroup">
      <ion-item *ngFor="let c of clientesConstantes" class="form-group">
          <ion-label position="floating">{{ c.title }}</ion-label>

          <ion-input class="form-control"
          [type]="c.type"
          [name]="c.name"
          [placeholder]="c.placeholder"
          [(ngModel)]="user[c.name]"
          [formControlName]="c.name"
          ></ion-input>
              <div [ngSwitch]="c.name">
                  <div *ngSwitchCase="'nif'">
                    <div *ngFor="let validation of validation_messages.nif">
                        <div class="alert alert-danger" *ngIf="formGroup.get('nif').hasError(validation.type) && (formGroup.get('nif').dirty || formGroup.get('nif').touched)">
                          <ion-icon name="close-circle-outline"></ion-icon> {{ validation.message }}
                        </div>
                    </div>
                  </div>
                  <div *ngSwitchCase="'name'">
                      <div *ngFor="let validation of validation_messages.name">
                          <div class="alert alert-danger" *ngIf="formGroup.get('name').hasError(validation.type) && (formGroup.get('name').dirty || formGroup.get('name').touched)">
                            <ion-icon name="close-circle-outline"></ion-icon> {{ validation.message }}
                          </div>
                      </div>
                  </div>
                  <div *ngSwitchCase="'address'">
                      <div *ngFor="let validation of validation_messages.address">
                          <div class="alert alert-danger" *ngIf="formGroup.get('address').hasError(validation.type) && (formGroup.get('address').dirty || formGroup.get('address').touched)">
                            <ion-icon name="close-circle-outline"></ion-icon> {{ validation.message }}
                          </div>
                      </div>
                  </div>
                  <div *ngSwitchCase="'phone'">
                      <div *ngFor="let validation of validation_messages.phone">
                          <div class="alert alert-danger" *ngIf="formGroup.get('phone').hasError(validation.type) && (formGroup.get('phone').dirty || formGroup.get('phone').touched)">
                            <ion-icon name="close-circle-outline"></ion-icon> {{ validation.message }}
                          </div>
                      </div>
                  </div>
                  <div *ngSwitchCase="'email'">
                      <div *ngFor="let validation of validation_messages.email">
                          <div class="alert alert-danger" *ngIf="formGroup.get('email').hasError(validation.type) && (formGroup.get('email').dirty || formGroup.get('email').touched)">
                            <ion-icon name="close-circle-outline"></ion-icon>{{ validation.message }}
                          </div>
                      </div>
                  </div>
                 </div>
                </ion-item>
  </form>

  <ion-header color="red">
      <ion-toolbar>
        <ion-title>Vehiculos</ion-title>
      </ion-toolbar>
    </ion-header>

    <form>
        <ion-item *ngFor="let cv of constantesVehiculos" >
          <ion-label position="floating">{{ cv.title }}</ion-label>
    
          <ion-input
          [type]="cv.type"
          [name]="cv.name"
          [placeholder]="cv.placeholder"></ion-input>
        </ion-item>
      </form>

      <ion-button expand="full" (click)="saveTodo($event)">Guardar</ion-button>
</ion-content>
